<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCR Dice Game</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; text-align: center; background: #f0f2f5; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        .player-list { text-align: left; margin: 20px 0; }
        .player-row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #eee; }
        .active { background: #e7f3ff; font-weight: bold; border-radius: 8px; }
        .dice-area { font-size: 2rem; margin: 20px; min-height: 50px; color: #007aff; }
        .pot { font-size: 1.2rem; color: #d9534f; font-weight: bold; margin-bottom: 10px; }
        button { background: #007aff; color: white; border: none; padding: 12px 24px; border-radius: 10px; font-size: 1rem; cursor: pointer; width: 100%; }
        button:disabled { background: #ccc; }
        #log { font-size: 0.8rem; color: #666; margin-top: 20px; height: 100px; overflow-y: auto; border-top: 1px solid #eee; padding-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>LCR Simulator</h2>
    <div class="pot">Center Pot: <span id="center-pot">0</span></div>
    
    <div id="player-container" class="player-list">
        </div>

    <div class="dice-area" id="dice-display">üé≤ üé≤ üé≤</div>
    
    <button id="roll-btn" onclick="takeTurn()">Roll Dice</button>
    
    <div id="log">Welcome! Tap Roll to start.</div>
</div>

<script>
    // Game State
    let players = [
        { name: "Alice", chips: 3 },
        { name: "Bob", chips: 3 },
        { name: "Charlie", chips: 3 },
        { name: "Diana", chips: 3 }
    ];
    let centerPot = 0;
    let currentIndex = 0;
    let gameOver = false;

    function updateUI() {
        const container = document.getElementById('player-container');
        container.innerHTML = '';
        
        players.forEach((p, i) => {
            const row = document.createElement('div');
            row.className = `player-row ${i === currentIndex && !gameOver ? 'active' : ''}`;
            row.innerHTML = `<span>${p.name}</span> <span>${p.chips} ü™ô</span>`;
            container.appendChild(row);
        });

        document.getElementById('center-pot').innerText = centerPot;
    }

    function log(msg) {
        const logDiv = document.getElementById('log');
        logDiv.innerHTML = msg + "<br>" + logDiv.innerHTML;
    }

    function takeTurn() {
        if (gameOver) return;

        let activePlayer = players[currentIndex];
        
        // Skip players with 0 chips
        if (activePlayer.chips === 0) {
            currentIndex = (currentIndex + 1) % players.length;
            takeTurn();
            return;
        }

        const numDice = Math.min(activePlayer.chips, 3);
        const sides = ['L', 'C', 'R', '‚Ä¢', '‚Ä¢', '‚Ä¢'];
        let rolls = [];
        
        for (let i = 0; i < numDice; i++) {
            let result = sides[Math.floor(Math.random() * sides.length)];
            rolls.push(result);

            if (result === 'L') {
                activePlayer.chips--;
                players[(currentIndex + 1) % players.length].chips++;
            } else if (result === 'R') {
                activePlayer.chips--;
                players[(currentIndex - 1 + players.length) % players.length].chips++;
            } else if (result === 'C') {
                activePlayer.chips--;
                centerPot++;
            }
        }

        document.getElementById('dice-display').innerText = rolls.join(' ');
        log(`${activePlayer.name} rolled: ${rolls.join(', ')}`);

        // Check for winner
        let playersWithChips = players.filter(p => p.chips > 0);
        if (playersWithChips.length === 1) {
            gameOver = true;
            let winner = playersWithChips[0];
            document.getElementById('roll-btn').disabled = true;
            document.getElementById('dice-display').innerText = "üèÜ";
            log(`<strong>GAME OVER! ${winner.name} wins!</strong>`);
        } else {
            currentIndex = (currentIndex + 1) % players.length;
        }

        updateUI();
    }

    updateUI();
</script>

</body>
</html>
