<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LCR Pro Roller</title>
    <style>
        body { font-family: -apple-system, sans-serif; text-align: center; background: #121212; color: white; margin: 0; padding: 20px; overflow-x: hidden; }
        .container { max-width: 400px; margin: auto; }
        
        /* Dice Animation */
        .dice-display { display: flex; justify-content: center; gap: 10px; margin: 40px 0; min-height: 80px; flex-wrap: wrap; }
        .die { background: white; color: black; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 12px; font-size: 1.8rem; font-weight: bold; box-shadow: 0 4px 10px rgba(255,255,255,0.2); }
        .shaking { animation: shake 0.15s infinite; background: #ffcc00 !important; }
        @keyframes shake {
            0% { transform: translate(2px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, -2px) rotate(-1deg); }
            100% { transform: translate(1px, -1px) rotate(1deg); }
        }

        /* Keypad Styling */
        .label { color: #888; font-size: 0.9rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .keypad { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 30px; }
        .key { background: #333; border: 2px solid #444; color: white; padding: 15px 0; border-radius: 12px; font-size: 1.3rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .key:active { background: #007aff; border-color: #007aff; transform: scale(0.9); }
        
        #history { margin-top: 30px; text-align: left; font-size: 0.85rem; color: #666; height: 180px; overflow-y: auto; border-top: 1px solid #333; padding-top: 15px; }
        .roll-entry { margin-bottom: 5px; padding-bottom: 5px; border-bottom: 1px solid #222; }
    </style>
</head>
<body>

<div class="container">
    <h2>LCR DICE</h2>
    
    <div class="dice-display" id="dice-container">
        <div class="die">?</div>
    </div>

    <div class="label">How many dice?</div>
    <div class="keypad">
        <button class="key" onclick="startSequence(1)">1</button>
        <button class="key" onclick="startSequence(2)">2</button>
        <button class="key" onclick="startSequence(3)">3</button>
        <button class="key" onclick="startSequence(4)">4</button>
        <button class="key" onclick="startSequence(5)">5</button>
    </div>

    <div id="history">
        <div style="color:#007aff; margin-bottom: 5px;">Roll History:</div>
    </div>
</div>

<script>
    const sides = ['L', 'C', 'R', '•', '•', '•'];
    let isRolling = false;

    function startSequence(count) {
        if (isRolling) return; // Prevent double taps
        isRolling = true;

        const container = document.getElementById('dice-container');
        container.innerHTML = '';

        // Create "empty" shaking dice
        for (let i = 0; i < count; i++) {
            let d = document.createElement('div');
            d.className = 'die shaking';
            d.innerText = '?';
            container.appendChild(d);
        }

        // Wait 0.8 seconds for suspense, then reveal
        setTimeout(() => {
            revealDice(count);
            isRolling = false;
        }, 800);
    }

    function revealDice(count) {
        const container = document.getElementById('dice-container');
        const history = document.getElementById('history');
        container.innerHTML = '';
        let results = [];

        for (let i = 0; i < count; i++) {
            let result = sides[Math.floor(Math.random() * sides.length)];
            results.push(result);
            
            let dieDiv = document.createElement('div');
            dieDiv.className = 'die';
            dieDiv.innerText = result;
            
            // Color code L, C, R
            if (result === 'L') dieDiv.style.color = '#ff3b30';
            if (result === 'C') dieDiv.style.color = '#ffcc00';
            if (result === 'R') dieDiv.style.color = '#34c759';
            
            container.appendChild(dieDiv);
        }

        // Add to log
        let time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        let logEntry = document.createElement('div');
        logEntry.className = 'roll-entry';
        logEntry.innerHTML = `<span style="color:#444">${time}:</span> Rolled ${count} &rarr; <b>${results.join(' ')}</b>`;
        history.prepend(logEntry);
    }
</script>

</body>
</html>
